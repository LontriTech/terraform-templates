name: Auto Catalog Update

on:  
  push:
  pull_request:
  schedule:
    - cron: '0 0 * * *'

jobs:
  auto-catalog-update:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        ref: ${{ github.head_ref }}
    
    - name: Look for new repositories
      uses: octokit/request-action@v2.x
      id: get_org_repos
      with:
        route: GET /orgs/fr-platform/repos
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
    - name: Add Git Submodules
      env:
        DATA: ${{ steps.get_org_repos.outputs.data }}
      run: |
        import os
        for i in list(os.environ['DATA']):
          print(i)
      shell: python

    #- name: Commit Update
    #  uses: stefanzweifel/git-auto-commit-action@v4
    #  with:
    #    commit_message: 'Catalog Auto Update'
        
